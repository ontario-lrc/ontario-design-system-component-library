{"version":3,"file":"ontario-back-to-top.e2e.js","sourceRoot":"","sources":["../../../../src/components/ontario-back-to-top/test/ontario-back-to-top.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage } from '@stencil/core/testing';\nimport { mockBTTContent } from './mock-page-content';\n\ndescribe('ontario-back-to-top', () => {\n\tit('should be hidden on page load', async () => {\n\t\tconst page = await newE2EPage();\n\t\tawait page.setContent('<ontario-back-to-top></ontario-back-to-top>');\n\t\tconst element = await page.find('ontario-back-to-top >>> button');\n\t\tconst styles = await element.getComputedStyle();\n\n\t\texpect(styles.visibility).toBe('hidden');\n\t\texpect(element).toHaveClass('ontario-back-to-top');\n\t\texpect(element).not.toHaveClass('active');\n\t});\n\n\tit('should be visible when the window is scrolled down beyond 200px', async () => {\n\t\tconst page = await newE2EPage();\n\t\tawait page.setContent(mockBTTContent);\n\n\t\t// scroll down the page\n\t\t// this method was taken from: https://github.com/microsoft/playwright/issues/4302#issuecomment-1132919529\n\t\t// setting delay function and calling it after setting the scrollTo was the only way to successfully get the scroll to work\n\t\tawait page.evaluate(async () => {\n\t\t\twindow.scrollTo(0, 500);\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\t\t});\n\n\t\tconst element = await page.find('ontario-back-to-top >>> button');\n\t\tconst styles = await element.getComputedStyle();\n\n\t\texpect(element.className).toEqual('ontario-back-to-top active');\n\t\texpect(styles?.visibility).toBe('visible');\n\t});\n\n\tit('should trigger the window to scroll back to the top of the page when clicked', async () => {\n\t\tconst page = await newE2EPage();\n\t\tawait page.setContent(mockBTTContent);\n\n\t\t// scroll down the page\n\t\tawait page.evaluate(async () => {\n\t\t\twindow.scrollTo(0, 500);\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\t\t});\n\n\t\t// wait for the scroll event to trigger and update the component's state\n\t\tawait page.waitForChanges();\n\t\tconst element = await page.find('ontario-back-to-top >>> button');\n\n\t\t// click the button\n\t\tawait element.click();\n\n\t\t// Wait for the scroll animation to complete\n\t\tawait new Promise((resolve) => setTimeout(resolve, 500));\n\n\t\tconst pageDetails = await page.evaluate(() => {\n\t\t\tconst component = window.document.getElementsByTagName('ontario-back-to-top')[0];\n\n\t\t\treturn {\n\t\t\t\tscrollY: window.scrollY,\n\t\t\t\telement: component.shadowRoot?.firstElementChild,\n\t\t\t\telementClassName: component.shadowRoot?.firstElementChild?.className,\n\t\t\t};\n\t\t});\n\n\t\texpect(pageDetails.scrollY).toEqual(0);\n\t\texpect(pageDetails.elementClassName).toEqual('ontario-back-to-top');\n\n\t\tconst styles = await element.getComputedStyle();\n\t\texpect(styles.visibility).toBe('hidden');\n\t});\n});\n"]}